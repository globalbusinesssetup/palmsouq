(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{785:function(e,t,r){"use strict";r.r(t);r(18),r(21),r(23),r(24),r(16),r(7),r(13);var o=r(1),n=r(4),c=(r(22),r(10));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"PosVoucher",middleware:["common-middleware","auth"],data:function(){return{voucher:"",error:null,voucherResult:null,submitting:!1,showForm:!1}},components:{AjaxButton:r(158).default},props:{calculatedPrice:{type:Object},selectedUser:{type:Object}},watch:{voucher:function(){this.voucherResult=null,this.error=null}},mixins:[],computed:d({},Object(c.c)("language",["langCode"])),methods:d({checkVoucher:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedUser&&-1!==(null===(r=e.selectedUser)||void 0===r?void 0:r.id)){t.next=3;break}return e.error=e.$t("ship.sa"),t.abrupt("return");case 3:return e.submitting=!0,t.next=6,e.setRequest({params:{voucher:e.voucher,user_id:null===(o=e.selectedUser)||void 0===o?void 0:o.id,price:null===(n=e.calculatedPrice)||void 0===n?void 0:n.totalPriceWithOffer},api:"voucherValidity",lang:e.langCode});case 6:c=t.sent,e.submitting=!1,201===(null==c?void 0:c.status)?e.error=c.data.form[0]:(e.voucherResult=c,e.$emit("voucher-result",c));case 9:case"end":return t.stop()}}),t)})))()},emptyError:function(){this.error=null},cbChanged:function(e){this.showForm=e.target.checked}},Object(c.b)("common",["getRequest","setRequest"])),mounted:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},v=r(15),component=Object(v.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"b-t mt-15 pt-15"},[t("div",{staticClass:"dply-felx start"},[t("label",{staticClass:"mb-0",attrs:{for:"pos-voucher"}},[t("input",{attrs:{type:"checkbox",id:"pos-voucher"},on:{change:e.cbChanged}}),e._v("\n      "+e._s(e.$t("fSale.voucher"))+"\n    ")]),e._v(" "),t("button",{staticClass:"toggle-arrow",attrs:{type:"button"},on:{click:function(t){e.showForm=!e.showForm}}},[t("i",{staticClass:"icon black arrow-down"})])]),e._v(" "),e.showForm?t("div",{staticClass:"p-15"},[e.error?t("h4",{staticClass:"error mtb-15"},[e._v(e._s(e.error))]):e._e(),e._v(" "),t("div",{staticClass:"pb-0",class:{invalid:!!e.error}},[t("form",{staticClass:"btn-input mt-15"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.voucher,expression:"voucher"}],staticClass:"pr-80",attrs:{placeholder:e.$t("prod.code"),type:"text"},domProps:{value:e.voucher},on:{input:function(t){t.target.composing||(e.voucher=t.target.value)}}}),e._v(" "),t("ajax-button",{staticClass:"primary-btn plr-15",attrs:{type:"button","fetching-data":e.submitting,"loading-text":"",disabled:!e.voucher||!!e.error||!!e.voucherResult,text:e.$t("ship.apply")},on:{clicked:e.checkVoucher}})],1)])]):e._e()])}),[],!1,null,"51141a5d",null);t.default=component.exports;installComponents(component,{AjaxButton:r(158).default})}}]);